<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">

<!--Converted with LaTeX2HTML 2002-1 (1.69)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Writing a Dynamic Analysis</TITLE>
<META NAME="description" CONTENT="Writing a Dynamic Analysis">
<META NAME="keywords" CONTENT="user_guide">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="user_guide.css">

<LINK REL="next" HREF="node8.html">
<LINK REL="previous" HREF="node6.html">
<LINK REL="up" HREF="user_guide.html">
<LINK REL="next" HREF="node8.html">
</HEAD>

<BODY >
<!--Navigation Panel-->
<A NAME="tex2html120"
  HREF="node8.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html118"
  HREF="user_guide.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html112"
  HREF="node6.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html121"
  HREF="node8.html">Instrumentation Events</A>
<B> Up:</B> <A NAME="tex2html119"
  HREF="user_guide.html">Chord: A Static and</A>
<B> Previous:</B> <A NAME="tex2html113"
  HREF="node6.html">Writing a Program Analysis</A>
<BR>
<BR>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION00070000000000000000"></A>
<A NAME="sec:writing-dynamic-analysis"></A>
<BR>
Writing a Dynamic Analysis
</H1>

<P>
Follow the following steps to write your own dynamic analysis.

<P>
<B>Step 1: Setting up the Instrumentation Scheme</B>

<P>
Determine the instrumentation scheme required by your dynamic analysis, that is,
the kind and format of events to be generated during an instrumented program's
execution. See Section <A HREF="node8.html#sec:instr-events"><IMG  ALIGN="BOTTOM" BORDER="1" ALT="[*]" SRC="crossref.png"></A> 
for the kinds of supported events and their formats.

<P>
<B>Step 2: Implementing the Analysis</B>

<P>
Create a class extending <TT>chord.project.DynamicAnalysis</TT> and override
the appropriate methods in it.
The only method that must be compulsorily overridden is method <TT>getInstrScheme()</TT>,
which must return an instance of the instrumentation scheme chosen in Step 1 above,
plus each <TT>process&lt;event&gt;(&lt;args&gt;)</TT> method that corresponds to event <TT>&lt;event&gt;</TT>
with format <TT>&lt;args&gt;</TT> enabled by the chosen instrumentation scheme.
All other methods are no-ops if not overridden.

<P>
A sample such class called <TT>MyDynamicAnalysis</TT> is shown below:

<P>
<PRE>
    import chord.project.DynamicAnalysis;
    import chord.instr.InstrScheme;

    // ***TODO***: analysis won't be recognized by Chord without this annotation
    @Chord(name=&lt;name-of-analysis&gt;)    
    
    public class MyDynamicAnalysis extends DynamicAnalysis {
        InstrScheme scheme;

        public InstrScheme getInstrScheme() {
            if (scheme != null)
                return scheme;
            scheme = new InstrScheme();
            // ***TODO***: Choose (&lt;event1&gt;, &lt;args1&gt;), ... (&lt;eventN&gt;, &lt;argsN&gt;)
            // depending upon the kind and format of events required by this
            // dynamic analysis to be generated for this during an instrumented
            // program's execution.
            scheme.set&lt;event1&gt;(&lt;args1&gt;);
            ...
            scheme.set&lt;eventN&gt;(&lt;argsN&gt;);
            return scheme;
        }

        public void initAllPasses() {
            // ***TODO***: User code to be executed once and for all
            // before all instrumented program runs start.
        }

        public void doneAllPasses() {
            // ***TODO***: User code to be executed once and for all
            // after all instrumented program runs finish.
        }

        public void initPass() {
            // ***TODO***: User code to be executed once before each
            // instrumented program run starts.
        }

        public void donePass() {
            // ***TODO***: User code to be executed once after each
            // instrumented program run finishes.
        }

        // User-defined event handlers for this dynamic analysis.
        // No-ops if not overridden.
        public void process&lt;event1&gt;(&lt;args1&gt;) {
            // ***TODO***: User code for handling events of kind
            // &lt;event1&gt; with format &lt;args1&gt;.
        }
        ...
        public void process&lt;eventN&gt;(&lt;argsN&gt;) {
            // ***TODO***: User code for handling events of kind
            // &lt;eventN&gt; with format &lt;argsN&gt;.
        }
    }
</PRE>

<P>
<B>Step 3: Choosing or Implementing the Runtime Event Handler</B>

<P>
Determine the runtime event handler for your dynamic analysis. There are two kinds of runtime event
handlers, offline and online; see package <TT>chord.runtime</TT> for more details.

<P>
For most dynamic analyses, an offline event hander suffices, in which case you don't need to do
anything in this step.
Otherwise, you need to create a class extending <TT>chord.runtime.Runtime</TT> and override the
appropriate methods in it, and provide the fully-qualified name of the created class as the value of property
<TT>chord.runtime.class</TT> (whose default value is <TT>chord.runtime.BufferedRuntime</TT>).

<P>
<B>Step 4: Compiling the Analysis</B>

<P>
Compile the analysis by placing the directory containing class <TT>MyDynamicAnalysis</TT> created
above in the path defined by property <TT>chord.java.analysis.path</TT>.

<P>
<B>Step 5: Specifying Program Inputs</B>

<P>
Provide the IDs of program runs to be generated (say 1, 2, ..., M) and the command-line arguments to be
used for the program in each of those runs (say <TT>&lt;args1&gt;</TT>, ..., <TT>&lt;argsM&gt;</TT>) via properties
<TT>chord.run.ids=1,2,...,N</TT> and <TT>chord.args.1=&lt;args1&gt;</TT>, ..., <TT>chord.args.M=&lt;argsM&gt;</TT>.
By default, <TT>chord.run.ids=0</TT> and <TT>chord.args.0=""</TT>, that is, the program will be run only
once (using run ID 0) with no command-line arguments.

<P>
<B>Step 6: Running the Analysis</B>

<P>
To run the analysis, set property <TT>chord.run.analyses</TT> to <TT>&lt;name-of-analysis&gt;</TT>
(recall that <TT>&lt;name-of-analysis&gt;</TT> is the name provided in the <TT>@Chord</TT> annotation for class
<TT>MyDynamicAnalysis</TT> created above).

<P>

<HR>
<!--Navigation Panel-->
<A NAME="tex2html120"
  HREF="node8.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html118"
  HREF="user_guide.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html112"
  HREF="node6.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A>   
<BR>
<B> Next:</B> <A NAME="tex2html121"
  HREF="node8.html">Instrumentation Events</A>
<B> Up:</B> <A NAME="tex2html119"
  HREF="user_guide.html">Chord: A Static and</A>
<B> Previous:</B> <A NAME="tex2html113"
  HREF="node6.html">Writing a Program Analysis</A>
<!--End of Navigation Panel-->
<ADDRESS>
Mayur Naik
2010-08-13
</ADDRESS>
</BODY>
</HTML>
